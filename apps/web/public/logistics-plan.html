<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>C&C Logistics Module - Complete Implementation Plan</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      line-height: 1.6;
      color: #1a1a2e;
      background: #f8f9fa;
      padding: 20px;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      padding: 40px 60px;
    }

    h1 {
      font-size: 2.5rem;
      color: #1a1a2e;
      border-bottom: 4px solid #7c3aed;
      padding-bottom: 15px;
      margin-bottom: 30px;
    }

    h2 {
      font-size: 1.5rem;
      color: #7c3aed;
      margin-top: 50px;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e5e7eb;
    }

    h3 {
      font-size: 1.2rem;
      color: #374151;
      margin-top: 25px;
      margin-bottom: 15px;
    }

    h4 {
      font-size: 1rem;
      color: #4b5563;
      margin-top: 20px;
      margin-bottom: 10px;
    }

    p {
      margin-bottom: 15px;
      color: #4b5563;
    }

    .highlight {
      background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
      color: white;
      padding: 20px 30px;
      border-radius: 10px;
      margin: 20px 0;
    }

    .highlight h3 {
      color: white;
      margin-top: 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      font-size: 0.9rem;
    }

    th {
      background: #7c3aed;
      color: white;
      padding: 12px 15px;
      text-align: left;
      font-weight: 600;
    }

    td {
      padding: 10px 15px;
      border-bottom: 1px solid #e5e7eb;
    }

    tr:hover {
      background: #f9fafb;
    }

    .priority-table td:first-child {
      font-weight: 600;
      color: #7c3aed;
    }

    .wireframe {
      background: #1a1a2e;
      color: #10b981;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 11px;
      padding: 20px;
      border-radius: 0 0 10px 10px;
      overflow-x: auto;
      margin: 0 0 30px 0;
      white-space: pre;
      line-height: 1.4;
    }

    .wireframe-title {
      background: #374151;
      color: white;
      padding: 10px 20px;
      border-radius: 10px 10px 0 0;
      font-weight: 600;
      margin-top: 20px;
    }

    .solution-box {
      background: #f0fdf4;
      border-left: 4px solid #10b981;
      padding: 20px;
      margin: 15px 0;
      border-radius: 0 8px 8px 0;
    }

    .problem-box {
      background: #fef2f2;
      border-left: 4px solid #ef4444;
      padding: 15px 20px;
      margin: 15px 0;
      border-radius: 0 8px 8px 0;
      color: #991b1b;
      font-weight: 500;
    }

    .calculation-box {
      background: #fffbeb;
      border: 2px solid #f59e0b;
      padding: 20px;
      margin: 20px 0;
      border-radius: 10px;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 13px;
    }

    .calculation-box .total {
      font-weight: bold;
      color: #7c3aed;
      font-size: 16px;
    }

    ul {
      margin: 15px 0;
      padding-left: 25px;
    }

    li {
      margin-bottom: 8px;
      color: #4b5563;
    }

    .phase {
      background: #f3f4f6;
      padding: 20px;
      border-radius: 10px;
      margin: 15px 0;
    }

    .phase h4 {
      color: #7c3aed;
      margin-bottom: 10px;
      margin-top: 0;
    }

    .phase ul {
      margin: 0;
    }

    .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }

    .badge-purple {
      background: #ede9fe;
      color: #7c3aed;
    }

    .badge-green {
      background: #d1fae5;
      color: #059669;
    }

    .badge-blue {
      background: #dbeafe;
      color: #2563eb;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 20px 0;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 20px;
      margin: 20px 0;
    }

    .card {
      background: #f9fafb;
      padding: 20px;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
    }

    .card h4 {
      color: #7c3aed;
      margin-bottom: 10px;
      margin-top: 0;
    }

    .tree {
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 12px;
      background: #f9fafb;
      padding: 15px 20px;
      border-radius: 8px;
      color: #374151;
      white-space: pre;
      overflow-x: auto;
      margin: 15px 0;
    }

    .flow-diagram {
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 12px;
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      padding: 25px;
      border-radius: 10px;
      border: 2px solid #e2e8f0;
      white-space: pre;
      overflow-x: auto;
      margin: 20px 0;
      line-height: 1.5;
    }

    .toc {
      background: #f3f4f6;
      padding: 25px 30px;
      border-radius: 10px;
      margin: 20px 0;
    }

    .toc h3 {
      margin-top: 0;
      margin-bottom: 15px;
    }

    .toc ol {
      columns: 2;
      column-gap: 40px;
    }

    .toc li {
      margin-bottom: 8px;
    }

    .toc a {
      color: #7c3aed;
      text-decoration: none;
    }

    .toc a:hover {
      text-decoration: underline;
    }

    .schema-table {
      font-size: 0.85rem;
    }

    .schema-table td:first-child {
      font-family: 'Monaco', 'Menlo', monospace;
      color: #7c3aed;
    }

    .schema-table td:nth-child(2) {
      font-family: 'Monaco', 'Menlo', monospace;
      color: #059669;
    }

    .footer {
      margin-top: 50px;
      padding-top: 20px;
      border-top: 2px solid #e5e7eb;
      text-align: center;
      color: #9ca3af;
      font-size: 0.9rem;
    }

    .status-pipeline {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 15px 0;
    }

    .status-item {
      background: #e5e7eb;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.85rem;
      position: relative;
    }

    .status-item::after {
      content: ' > ';
      position: absolute;
      right: -15px;
      color: #9ca3af;
    }

    .status-item:last-child::after {
      content: '';
    }

    @media print {
      body {
        background: white;
        padding: 0;
      }
      .container {
        box-shadow: none;
        padding: 20px;
      }
      .wireframe {
        font-size: 9px;
      }
      h2 {
        page-break-before: always;
      }
    }

    @media (max-width: 768px) {
      .grid-2, .grid-3 {
        grid-template-columns: 1fr;
      }
      .toc ol {
        columns: 1;
      }
      .container {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>C&C Logistics Module</h1>
    <p><strong>Complete Implementation Plan</strong> | January 2026</p>

    <div class="toc">
      <h3>Contents</h3>
      <ol>
        <li><a href="#purpose">Core Purpose & Priorities</a></li>
        <li><a href="#achieve">How We Achieve Each Priority</a></li>
        <li><a href="#cost-analysis">Cost Analysis & Arbitrage</a></li>
        <li><a href="#customs-deposits">Customs Deposits (FZ to FZ)</a></li>
        <li><a href="#users">Users & Access</a></li>
        <li><a href="#features">Features Overview</a></li>
        <li><a href="#database">Database Schema (Full)</a></li>
        <li><a href="#workflows">Process Workflows</a></li>
        <li><a href="#wireframes">Wireframes (13 screens)</a></li>
        <li><a href="#integrations">Integrations</a></li>
        <li><a href="#phases">Implementation Phases</a></li>
      </ol>
    </div>

    <!-- CORE PURPOSE -->
    <h2 id="purpose">Core Purpose</h2>

    <p>Track alcohol shipments in/out of UAE warehouse, manage compliance documents, generate logistics quotes for clients, calculate true landed costs per bottle.</p>

    <div class="highlight">
      <h3>Main Warehouse: RAK Port, UAE</h3>
    </div>

    <table class="priority-table">
      <thead>
        <tr>
          <th>Priority</th>
          <th>Goal</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1. Document Tracking</td>
          <td>Centralized storage, easy search, never lose a document</td>
        </tr>
        <tr>
          <td>2. Scalability</td>
          <td>Structured processes that work at 10x volume</td>
        </tr>
        <tr>
          <td>3. Accuracy</td>
          <td>Correct workflows, validated documents, no errors</td>
        </tr>
        <tr>
          <td>4. Traceability</td>
          <td>Full audit trail - who did what, when, why</td>
        </tr>
        <tr>
          <td>5. Compliance</td>
          <td>Expiry alerts, required doc checklists, regulatory adherence</td>
        </tr>
        <tr>
          <td>6. Quotations</td>
          <td>Accurate quotes with proper review/approval process</td>
        </tr>
        <tr>
          <td>7. Cost Analysis</td>
          <td>True landed cost per bottle, arbitrage opportunities</td>
        </tr>
        <tr>
          <td>8. Customs Deposits</td>
          <td>Track FZ to FZ transfer deposits, reclaim paperwork</td>
        </tr>
      </tbody>
    </table>

    <!-- HOW WE ACHIEVE EACH -->
    <h2 id="achieve">How We Achieve Each Priority</h2>

    <div class="grid-2">
      <div class="card">
        <h4>1. Document Tracking</h4>
        <div class="problem-box">Problem: Documents scattered in emails, drives, lost</div>
        <ul>
          <li>Centralized storage (Vercel Blob)</li>
          <li>Linked to shipment (never orphaned)</li>
          <li>Typed & tagged (BOL, invoice, permit)</li>
          <li>Searchable by type, date, shipment, client</li>
          <li>Version history (re-upload keeps old)</li>
          <li>AI extraction (auto-extract key fields)</li>
        </ul>
      </div>

      <div class="card">
        <h4>2. Scalability</h4>
        <div class="problem-box">Problem: Manual processes break at volume</div>
        <ul>
          <li>Structured data (not spreadsheets)</li>
          <li>Status pipelines (clear next steps)</li>
          <li>Batch operations (process many at once)</li>
          <li>API integrations (auto-sync with carriers)</li>
          <li>Templates (reuse common configurations)</li>
          <li>Dashboard views (see everything at glance)</li>
        </ul>
      </div>

      <div class="card">
        <h4>3. Accuracy</h4>
        <div class="problem-box">Problem: Errors in documents, wrong data entry</div>
        <ul>
          <li>Required fields (can't skip important data)</li>
          <li>Document checklists (required docs per type)</li>
          <li>Validation rules (HS codes, dates, formats)</li>
          <li>Status blocks (can't advance without docs)</li>
          <li>Admin verification (sign-off on documents)</li>
          <li>Calculated fields (auto-compute totals)</li>
        </ul>
      </div>

      <div class="card">
        <h4>4. Traceability</h4>
        <div class="problem-box">Problem: "Who changed this? When? Why?"</div>
        <ul>
          <li>Activity log per shipment</li>
          <li>Document upload history (who, when)</li>
          <li>Status change history (from/to)</li>
          <li>Edit history (what changed)</li>
          <li>User attribution (every action tracked)</li>
          <li>Timestamps on everything</li>
        </ul>
      </div>

      <div class="card">
        <h4>5. Compliance</h4>
        <div class="problem-box">Problem: Licenses expire, docs missing at customs</div>
        <ul>
          <li>Expiry tracking (90/60/30 day alerts)</li>
          <li>Required document checklists</li>
          <li>Market-specific requirements (UAE/Saudi/Qatar)</li>
          <li>Renewal status tracking</li>
          <li>Compliance dashboard (see all risks)</li>
          <li>Audit-ready export (all docs for shipment)</li>
        </ul>
      </div>

      <div class="card">
        <h4>6. Quotations</h4>
        <div class="problem-box">Problem: Quotes inaccurate, no review process</div>
        <ul>
          <li>Rate cards (predefined pricing by route)</li>
          <li>Carrier API rates (live Hillebrand pricing)</li>
          <li>Cost breakdown (freight, handling, margin)</li>
          <li>Quote review status (draft > review > sent)</li>
          <li>Approval workflow (admin approves first)</li>
          <li>Convert to shipment (accepted > shipment)</li>
        </ul>
      </div>
    </div>

    <!-- COST ANALYSIS -->
    <h2 id="cost-analysis">Cost Analysis & Arbitrage</h2>

    <div class="problem-box">Problem: Don't know true cost per bottle, miss arbitrage opportunities</div>

    <h3>Landed Cost = ALL costs to get product into warehouse</h3>

    <div class="calculation-box">
EXAMPLE CALCULATION (per shipment):
----------------------------------------
Product Cost (ex-cellar):    $5,760  (480 bottles x $12)
Freight (origin to UAE):     $2,400
Insurance:                     $120
Origin handling:               $150
Destination handling:          $200
Customs clearance:             $180
Government fees:               $150
Delivery to warehouse:         $100
----------------------------------------
TOTAL LANDED COST:           $9,060

/ Total Bottles:               480
----------------------------------------
<span class="total">= LANDED COST PER BOTTLE:    $18.88</span>

This is the TRUE cost to have 1 bottle sitting in RAK Port warehouse.
    </div>

    <h3>Allocation Methods (for multi-product shipments)</h3>
    <ul>
      <li><strong>By bottle count</strong> (simple split) - default</li>
      <li><strong>By weight</strong> (kg per item / total kg)</li>
      <li><strong>By value</strong> (item value / total value)</li>
      <li>Admin selects method per shipment</li>
    </ul>

    <div class="solution-box">
      <h4>What This Enables:</h4>
      <ul>
        <li>Auto-calculate landed cost per bottle</li>
        <li>Compare to target selling price</li>
        <li>Show margin per bottle and %</li>
        <li>Flag low/negative margins</li>
        <li>Compare across markets (UAE vs Qatar vs Saudi)</li>
        <li>Identify arbitrage opportunities (high-margin products)</li>
        <li>Track historical price trends</li>
      </ul>
    </div>

    <!-- CUSTOMS DEPOSITS -->
    <h2 id="customs-deposits">Customs Deposits (FZ to FZ Transfers)</h2>

    <div class="problem-box">Problem: Cash tied up in customs deposits, manual tracking, delayed reclaims</div>

    <h3>What Are Customs Deposits?</h3>
    <ul>
      <li>Required for bonded road transfers within UAE</li>
      <li>FZ to FZ (Free Zone to Free Zone) movements</li>
      <li>Example: RAK Port to JAFZA or RAK to DWC</li>
      <li>Cash held by customs until paperwork complete</li>
      <li>Must stamp documents to reclaim deposit</li>
    </ul>

    <h3>Deposit Process Flow</h3>
    <div class="flow-diagram">
+----------------+      +----------------+      +----------------+      +----------------+
|    DEPOSIT     |      |    TRANSFER    |      |   PAPERWORK    |      |    DEPOSIT     |
|     PAID       | ---> |    COMPLETE    | ---> |   SUBMITTED    | ---> |   RECLAIMED    |
+----------------+      +----------------+      +----------------+      +----------------+
        |                      |                      |                      |
        v                      v                      v                      v
  Pay deposit to       Goods arrive at        Submit stamped         Customs returns
  customs based        destination FZ,        docs to customs        deposit, record
  on cargo value       receive stamps         office                 date received

  Status: pending      Status: transferred    Status: submitted      Status: reclaimed
    </div>

    <div class="solution-box">
      <h4>What We Track:</h4>
      <ul>
        <li>Total deposits outstanding (cash flow visibility)</li>
        <li>Age of deposits (flag overdue reclaims)</li>
        <li>Reclaim success rate</li>
        <li>Average days to reclaim</li>
        <li>Blocked shipments (deposit issues)</li>
        <li>Transfer type (FZ to FZ vs FZ to mainland)</li>
        <li>Origin and destination free zones</li>
      </ul>
    </div>

    <!-- USERS -->
    <h2 id="users">Users & Access</h2>

    <table>
      <thead>
        <tr>
          <th>User Type</th>
          <th>What They Do</th>
          <th>Access Level</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><span class="badge badge-purple">Admin</span></td>
          <td>Manage all shipments, quotes, documents, invoicing, cost analysis</td>
          <td>Full read/write access</td>
        </tr>
        <tr>
          <td><span class="badge badge-green">Partner</span></td>
          <td>View their inbound shipments, upload documents, track status</td>
          <td>Own shipments only, upload docs</td>
        </tr>
        <tr>
          <td><span class="badge badge-blue">Client</span></td>
          <td>View their outbound shipments, download documents, see their costs</td>
          <td>Own shipments only, download docs</td>
        </tr>
      </tbody>
    </table>

    <!-- FEATURES -->
    <h2 id="features">Features Overview</h2>

    <div class="grid-3">
      <div class="card">
        <h4>1. Shipments</h4>
        <ul>
          <li>Create inbound/outbound/re-export</li>
          <li>Track via carrier APIs</li>
          <li>Status pipeline management</li>
          <li>Link documents to shipments</li>
        </ul>
      </div>

      <div class="card">
        <h4>2. Documents</h4>
        <ul>
          <li>Upload BOL, AWB, invoices</li>
          <li>Expiry alerts (90/60/30 days)</li>
          <li>AI extraction of key fields</li>
          <li>Version history</li>
        </ul>
      </div>

      <div class="card">
        <h4>3. Quotes</h4>
        <ul>
          <li>Generate logistics quotes</li>
          <li>Pull rates from Hillebrand API</li>
          <li>Review/approval workflow</li>
          <li>Convert to shipments</li>
        </ul>
      </div>

      <div class="card">
        <h4>4. Compliance</h4>
        <ul>
          <li>Track license expiry</li>
          <li>Renewal status tracking</li>
          <li>Document checklists</li>
          <li>Compliance dashboard</li>
        </ul>
      </div>

      <div class="card">
        <h4>5. Payments</h4>
        <ul>
          <li>Track freight costs</li>
          <li>Track government charges</li>
          <li>Invoice clients</li>
          <li>Sync to Zoho Books</li>
        </ul>
      </div>

      <div class="card">
        <h4>6. Cost Analysis</h4>
        <ul>
          <li>Landed cost per bottle</li>
          <li>Track margins by product</li>
          <li>Arbitrage opportunities</li>
          <li>Export reports</li>
        </ul>
      </div>

      <div class="card">
        <h4>7. Customs Deposits</h4>
        <ul>
          <li>Track FZ transfers</li>
          <li>Monitor deposit status</li>
          <li>Paperwork workflow</li>
          <li>Cash flow visibility</li>
        </ul>
      </div>
    </div>

    <!-- DATABASE SCHEMA -->
    <h2 id="database">Database Schema (Full)</h2>

    <h3>Enums</h3>
    <div class="tree">
Shipment Type:    inbound | outbound | re_export
Transport Mode:   sea_fcl | sea_lcl | air | road
Document Type:    bill_of_lading | airway_bill | commercial_invoice | packing_list |
                  certificate_of_origin | customs_declaration | import_permit |
                  export_permit | delivery_note | health_certificate | other
Quote Status:     draft | sent | accepted | rejected | expired | converted
Deposit Status:   pending | transferred | submitted | reclaimed
    </div>

    <h3>Shipment Status Pipeline</h3>
    <div class="status-pipeline">
      <span class="status-item">draft</span>
      <span class="status-item">booked</span>
      <span class="status-item">picked_up</span>
      <span class="status-item">in_transit</span>
      <span class="status-item">arrived_port</span>
      <span class="status-item">customs_clearance</span>
      <span class="status-item">cleared</span>
      <span class="status-item">at_warehouse</span>
      <span class="status-item">dispatched</span>
      <span class="status-item">delivered</span>
    </div>

    <h3>Tables (15 total)</h3>

    <h4>logistics_shipments</h4>
    <table class="schema-table">
      <thead><tr><th>Column</th><th>Type</th><th>Description</th></tr></thead>
      <tbody>
        <tr><td>id</td><td>uuid</td><td>Primary key</td></tr>
        <tr><td>shipmentNumber</td><td>text</td><td>"SHP-2026-0001"</td></tr>
        <tr><td>type</td><td>enum</td><td>inbound, outbound, re_export</td></tr>
        <tr><td>transportMode</td><td>enum</td><td>sea_fcl, sea_lcl, air, road</td></tr>
        <tr><td>status</td><td>enum</td><td>Current pipeline status</td></tr>
        <tr><td>partnerId</td><td>uuid FK</td><td>Wine partner (inbound)</td></tr>
        <tr><td>clientContactId</td><td>uuid FK</td><td>Client (outbound)</td></tr>
        <tr><td>originCountry</td><td>text</td><td>e.g., "France"</td></tr>
        <tr><td>originCity</td><td>text</td><td>e.g., "Bordeaux"</td></tr>
        <tr><td>destinationCountry</td><td>text</td><td>e.g., "UAE"</td></tr>
        <tr><td>destinationCity</td><td>text</td><td>e.g., "Dubai"</td></tr>
        <tr><td>carrierId</td><td>uuid FK</td><td>Shipping carrier</td></tr>
        <tr><td>carrierBookingRef</td><td>text</td><td>Carrier's reference</td></tr>
        <tr><td>containerNumber</td><td>text</td><td>For sea freight</td></tr>
        <tr><td>blNumber</td><td>text</td><td>Bill of Lading #</td></tr>
        <tr><td>awbNumber</td><td>text</td><td>Airway Bill #</td></tr>
        <tr><td>etd / atd</td><td>timestamp</td><td>Estimated/Actual departure</td></tr>
        <tr><td>eta / ata</td><td>timestamp</td><td>Estimated/Actual arrival</td></tr>
        <tr><td>totalCases</td><td>integer</td><td>Number of cases</td></tr>
        <tr><td>totalWeightKg</td><td>decimal</td><td>Total weight</td></tr>
        <tr><td>freightCostUsd</td><td>decimal</td><td>C&C cost</td></tr>
      </tbody>
    </table>

    <h4>logistics_shipment_items (with Cost Tracking)</h4>
    <table class="schema-table">
      <thead><tr><th>Column</th><th>Type</th><th>Description</th></tr></thead>
      <tbody>
        <tr><td>id</td><td>uuid</td><td>Primary key</td></tr>
        <tr><td>shipmentId</td><td>uuid FK</td><td>Parent shipment</td></tr>
        <tr><td>productId</td><td>uuid FK</td><td>Product (optional)</td></tr>
        <tr><td>productName</td><td>text</td><td>Fallback name</td></tr>
        <tr><td>producer</td><td>text</td><td>Wine producer</td></tr>
        <tr><td>vintage</td><td>integer</td><td>Year</td></tr>
        <tr><td>hsCode</td><td>text</td><td>"2204.21"</td></tr>
        <tr><td>countryOfOrigin</td><td>text</td><td>COO</td></tr>
        <tr><td>cases</td><td>integer</td><td>Number of cases</td></tr>
        <tr><td>bottlesPerCase</td><td>integer</td><td>e.g., 12</td></tr>
        <tr><td>bottleSizeMl</td><td>integer</td><td>e.g., 750</td></tr>
        <tr><td>grossWeightKg</td><td>decimal</td><td>Weight</td></tr>
        <tr><td>declaredValueUsd</td><td>decimal</td><td>Customs value</td></tr>
        <tr><td colspan="3" style="background:#ede9fe;font-weight:bold">Cost Tracking Fields</td></tr>
        <tr><td>productCostPerBottle</td><td>decimal</td><td>Ex-cellar cost</td></tr>
        <tr><td>freightAllocated</td><td>decimal</td><td>Freight portion for this item</td></tr>
        <tr><td>handlingAllocated</td><td>decimal</td><td>Handling portion</td></tr>
        <tr><td>govFeesAllocated</td><td>decimal</td><td>Gov fees portion</td></tr>
        <tr><td>landedCostTotal</td><td>decimal</td><td>Total landed cost (calculated)</td></tr>
        <tr><td>landedCostPerBottle</td><td>decimal</td><td>Per bottle (calculated)</td></tr>
        <tr><td>targetSellingPrice</td><td>decimal</td><td>Expected sell price</td></tr>
        <tr><td>marginPerBottle</td><td>decimal</td><td>Profit per bottle (calculated)</td></tr>
        <tr><td>marginPercent</td><td>decimal</td><td>Margin % (calculated)</td></tr>
      </tbody>
    </table>

    <h4>logistics_documents</h4>
    <table class="schema-table">
      <thead><tr><th>Column</th><th>Type</th><th>Description</th></tr></thead>
      <tbody>
        <tr><td>id</td><td>uuid</td><td>Primary key</td></tr>
        <tr><td>shipmentId</td><td>uuid FK</td><td>Parent shipment</td></tr>
        <tr><td>documentType</td><td>enum</td><td>BOL, AWB, invoice, etc.</td></tr>
        <tr><td>documentNumber</td><td>text</td><td>Reference #</td></tr>
        <tr><td>fileUrl</td><td>text</td><td>Vercel Blob URL</td></tr>
        <tr><td>fileName</td><td>text</td><td>Original name</td></tr>
        <tr><td>fileSize</td><td>integer</td><td>Bytes</td></tr>
        <tr><td>mimeType</td><td>text</td><td>PDF, image, etc.</td></tr>
        <tr><td>issueDate</td><td>date</td><td>When issued</td></tr>
        <tr><td>expiryDate</td><td>date</td><td>For alerts</td></tr>
        <tr><td>isRequired</td><td>boolean</td><td>Blocks status change</td></tr>
        <tr><td>isVerified</td><td>boolean</td><td>Admin verified</td></tr>
        <tr><td>verifiedBy</td><td>uuid FK</td><td>Admin user</td></tr>
        <tr><td>uploadedBy</td><td>uuid FK</td><td>Who uploaded</td></tr>
      </tbody>
    </table>

    <h4>logistics_customs_deposits</h4>
    <table class="schema-table">
      <thead><tr><th>Column</th><th>Type</th><th>Description</th></tr></thead>
      <tbody>
        <tr><td>id</td><td>uuid</td><td>Primary key</td></tr>
        <tr><td>shipmentId</td><td>uuid FK</td><td>Related shipment</td></tr>
        <tr><td>transferType</td><td>text</td><td>fz_to_fz, fz_to_mainland</td></tr>
        <tr><td>originFreeZone</td><td>text</td><td>e.g., "RAK FTZ"</td></tr>
        <tr><td>destinationFreeZone</td><td>text</td><td>e.g., "JAFZA"</td></tr>
        <tr><td>depositAmount</td><td>decimal</td><td>Cash deposit paid</td></tr>
        <tr><td>currency</td><td>text</td><td>AED</td></tr>
        <tr><td>depositPaidAt</td><td>timestamp</td><td>When paid</td></tr>
        <tr><td>depositReference</td><td>text</td><td>Customs receipt #</td></tr>
        <tr><td>status</td><td>text</td><td>pending, transferred, submitted, reclaimed</td></tr>
        <tr><td>transferCompletedAt</td><td>timestamp</td><td>Goods arrived</td></tr>
        <tr><td>paperworkSubmittedAt</td><td>timestamp</td><td>Docs submitted</td></tr>
        <tr><td>depositReclaimedAt</td><td>timestamp</td><td>Cash returned</td></tr>
        <tr><td>daysOutstanding</td><td>integer</td><td>Calculated</td></tr>
      </tbody>
    </table>

    <h4>Other Tables</h4>
    <table>
      <thead><tr><th>Table</th><th>Purpose</th></tr></thead>
      <tbody>
        <tr><td>logistics_carriers</td><td>Carrier reference (Hillebrand, Hapag-Lloyd)</td></tr>
        <tr><td>logistics_quotes</td><td>Client quotations with approval workflow</td></tr>
        <tr><td>logistics_rates</td><td>Rate cards by route</td></tr>
        <tr><td>logistics_tracking_events</td><td>Shipment milestones</td></tr>
        <tr><td>logistics_activity_logs</td><td>Full audit trail (traceability)</td></tr>
        <tr><td>logistics_payments</td><td>Payment tracking (freight, handling, gov fees)</td></tr>
        <tr><td>logistics_invoices</td><td>Client invoices (sync to Zoho)</td></tr>
        <tr><td>logistics_document_versions</td><td>Document version history</td></tr>
        <tr><td>compliance_licenses</td><td>License/cert tracking with expiry</td></tr>
        <tr><td>compliance_alerts</td><td>Scheduled expiry alerts (90/60/30 days)</td></tr>
      </tbody>
    </table>

    <!-- WORKFLOWS -->
    <h2 id="workflows">Process Workflows</h2>

    <h3>Inbound Shipment Flow (Partner to UAE)</h3>
    <div class="flow-diagram">
+------------------------------------------------------------------------------+
|                           INBOUND SHIPMENT WORKFLOW                          |
+------------------------------------------------------------------------------+

  +----------+    +----------+    +----------+    +----------+    +----------+
  |  DRAFT   |--->|  BOOKED  |--->|IN TRANSIT|--->|  CUSTOMS |--->|WAREHOUSE |
  +----------+    +----------+    +----------+    +----------+    +----------+
       |               |               |               |               |
       v               v               v               v               v

  Admin creates    Carrier         Auto-track      Upload customs   Goods received
  shipment,        booking         via API,        declaration,     at RAK Port,
  selects partner  confirmed,      milestone       pay gov fees,    verify quantities,
                   ETD/ETA set     updates         clear customs    calculate landed
                                                                    cost per bottle

  Partner          Partner                         Admin verifies
  notified,        uploads:                        documents        COMPLETE
  views in         - Invoice                                        Ready for storage
  portal           - Packing list                                   or re-export
                   - COO
    </div>

    <h3>Outbound Shipment Flow (UAE to Client)</h3>
    <div class="flow-diagram">
+------------------------------------------------------------------------------+
|                          OUTBOUND SHIPMENT WORKFLOW                          |
+------------------------------------------------------------------------------+

  +----------+    +----------+    +----------+    +----------+    +----------+
  |  DRAFT   |--->|  BOOKED  |--->|DISPATCHED|--->|IN TRANSIT|--->|DELIVERED |
  +----------+    +----------+    +----------+    +----------+    +----------+
       |               |               |               |               |
       v               v               v               v               v

  Admin creates    Book with       Goods leave     Track via        Client confirms
  shipment,        carrier,        warehouse,      carrier API      receipt
  selects client,  generate        update status
  add items        export permit                                    Generate invoice,
                                                                    sync to Zoho

  Optional:
  Generate quote ---> Client accepts ---> Convert to shipment
    </div>

    <h3>Quote Approval Flow</h3>
    <div class="flow-diagram">
+------------------------------------------------------------------------------+
|                            QUOTE APPROVAL WORKFLOW                           |
+------------------------------------------------------------------------------+

  +----------+    +----------+    +----------+    +----------+    +----------+
  |  DRAFT   |--->|  REVIEW  |--->| APPROVED |--->|   SENT   |--->| RESPONSE |
  +----------+    +----------+    +----------+    +----------+    +----------+
       |               |               |               |               |
       v               v               v               v               v

  Select client,  Senior admin    Approved for    Generate PDF,         +--> ACCEPTED
  enter route,    reviews costs   sending         email to client  -----|    Convert to
  calculate:      and margin                                            |    shipment
  - Freight                                                             |
  - Handling                                                            +--> REJECTED
  - Gov charges                                                              Log reason
  - C&C margin

  Fetch rates from Hillebrand API or use manual rates
    </div>

    <h3>Document Compliance</h3>
    <div class="tree">
INBOUND - Required Documents:
+-- Bill of Lading / Airway Bill  (before departure)
+-- Commercial Invoice            (before departure)
+-- Packing List                  (before departure)
+-- Certificate of Origin         (at customs)
+-- Import Permit                 (for alcohol)
+-- Customs Declaration           (at arrival)

OUTBOUND - Required Documents:
+-- Export Permit                 (before dispatch)
+-- Commercial Invoice            (for client)
+-- Packing List                  (for client)
+-- Delivery Note                 (at delivery)

STATUS BLOCKED IF:
+-- Required documents missing or unverified
    </div>

    <h3>FZ to FZ Transfer Flow</h3>
    <div class="flow-diagram">
+------------------------------------------------------------------------------+
|                         FZ TO FZ TRANSFER (Customs Deposit)                  |
+------------------------------------------------------------------------------+

  Example: RAK FTZ --------------------------------> JAFZA

  +--------------+    +--------------+    +--------------+    +--------------+
  |   DEPOSIT    |    |    GOODS     |    |  PAPERWORK   |    |   DEPOSIT    |
  |    PAID      |--->|   ARRIVE     |--->|  SUBMITTED   |--->|  RECLAIMED   |
  +--------------+    +--------------+    +--------------+    +--------------+
        |                   |                   |                    |
        v                   v                   v                    v

  Pay cash deposit    Goods arrive at     Submit stamped       Customs returns
  to customs based    destination FZ,     documents to         deposit, record
  on cargo value      get documents       customs office       date & amount
                      stamped

  Track: Days outstanding, amount held, reclaim rate, overdue alerts
    </div>

    <!-- WIREFRAMES -->
    <h2 id="wireframes">Wireframes (13 Screens)</h2>

    <div class="wireframe-title">1. Admin Dashboard</div>
    <div class="wireframe">+-------------------------------------------------------------------+
|  LOGISTICS                                     [+ New Shipment]   |
+-------------------------------------------------------------------+
|  +----------+ +----------+ +----------+ +----------+              |
|  |    12    | |     5    | |     3    | |     8    |              |
|  | In Transit| | Customs  | | At Bond  | |Delivered |              |
|  +----------+ +----------+ +----------+ +----------+              |
|                                                                   |
|  Active Shipments                              [Filter] [Search]  |
|  +---------------------------------------------------------------+|
|  | SHP-2026-0042 | Inbound | Sea | Bordeaux -> Dubai             ||
|  | Hapag-Lloyd   | 40 cases | ETA: Jan 18 | [Y] In Transit       ||
|  +---------------------------------------------------------------+|
|  | SHP-2026-0041 | Outbound | Air | Dubai -> Riyadh              ||
|  | Emirates      | 12 cases | ETD: Jan 14 | [G] Booked           ||
|  +---------------------------------------------------------------+|
|                                                                   |
|  Document Alerts                                                  |
|  [!] SHP-0042: Missing Certificate of Origin                      |
|  [!] SHP-0038: Import permit expires in 7 days                    |
|                                                                   |
|  Customs Deposits Outstanding: AED 85,000 (4 pending)             |
+-------------------------------------------------------------------+</div>

    <div class="wireframe-title">2. Shipment List</div>
    <div class="wireframe">+-------------------------------------------------------------------+
|  SHIPMENTS                                     [+ New Shipment]   |
+-------------------------------------------------------------------+
|  Filters: [All v] [Inbound v] [Sea v] [This Month v]  [Search]    |
|                                                                   |
|  +---------------------------------------------------------------+|
|  | # | Type    | Route           | Cases | ETA      | Status     ||
|  +---------------------------------------------------------------+|
|  | 42| Inbound | Bordeaux->Dubai |   40  | Jan 18   |[Y]Transit  ||
|  | 41| Outbound| Dubai->Riyadh   |   12  | Jan 14   |[G]Booked   ||
|  | 40| Inbound | Napa->Dubai     |   24  | Jan 12   |[B]Cleared  ||
|  | 39| Re-export| Dubai->Doha    |    8  | Jan 10   |[+]Delivered||
|  +---------------------------------------------------------------+|
|                                                                   |
|  Showing 1-20 of 156                           [< 1 2 3 ... >]    |
+-------------------------------------------------------------------+</div>

    <div class="wireframe-title">3. Shipment Detail - Overview Tab</div>
    <div class="wireframe">+-------------------------------------------------------------------+
|  <- Back                                                          |
|  SHP-2026-0042                                 [Y] In Transit      |
|  Inbound Sea Freight (FCL)                                        |
+-------------------------------------------------------------------+
|  [Overview] [Items] [Documents] [Tracking] [Costs] [Activity]     |
|                                                                   |
|  +---------------------------------------------------------------+|
|  |  ROUTE                                                        ||
|  |  Bordeaux, France  ------------------>  Dubai, UAE            ||
|  |  Departed: Jan 5        ######..   ETA: Jan 18                ||
|  +---------------------------------------------------------------+|
|                                                                   |
|  Partner                        Carrier                           |
|  -------------                  -------------                     |
|  Bordeaux Direct                Hapag-Lloyd                       |
|  contact@bordeaux.fr            Container: HLCU1234567            |
|                                 BOL: HLCU2026001234               |
|                                 [Track on Hapag-Lloyd ->]         |
|                                                                   |
|  Documents (4/6)                                                  |
|  ---------------------------------------------------------------- |
|  [+] Bill of Lading           [+] Commercial Invoice              |
|  [+] Packing List             [!] Certificate of Origin           |
|  [!] Import Permit            [ ] Customs Declaration             |
|                                                                   |
|  [Upload Document]  [Update Status v]  [Edit Shipment]            |
+-------------------------------------------------------------------+</div>

    <div class="wireframe-title">4. Shipment Items Tab</div>
    <div class="wireframe">+-------------------------------------------------------------------+
|  [Overview] [Items] [Documents] [Tracking] [Costs] [Activity]     |
+-------------------------------------------------------------------+
|  ITEMS (3)                                        [+ Add Item]    |
|                                                                   |
|  +---------------------------------------------------------------+|
|  | Product              | Cases | Bottles | Weight | HS Code     ||
|  +---------------------------------------------------------------+|
|  | Chateau Margaux 2018 |   12  |   144   | 180 kg | 2204.21     ||
|  | Bordeaux, France                                              ||
|  +---------------------------------------------------------------+|
|  | Chateau Latour 2019  |   20  |   240   | 300 kg | 2204.21     ||
|  | Bordeaux, France                                              ||
|  +---------------------------------------------------------------+|
|  | Dom Perignon 2012    |    8  |    96   | 120 kg | 2204.10     ||
|  | Champagne, France                                             ||
|  +---------------------------------------------------------------+|
|                                                                   |
|  TOTALS: 40 cases | 480 bottles | 600 kg                         |
+-------------------------------------------------------------------+</div>

    <div class="wireframe-title">5. Tracking Timeline Tab</div>
    <div class="wireframe">+-------------------------------------------------------------------+
|  [Overview] [Items] [Documents] [Tracking] [Costs] [Activity]     |
+-------------------------------------------------------------------+
|  TRACKING TIMELINE                            [Refresh from API]  |
|                                                                   |
|  o Departed Bordeaux                           Jan 5, 08:30       |
|  | Vessel: MSC ORCHESTRA                                          |
|  |                                                                |
|  o Arrived Gibraltar (transshipment)           Jan 8, 14:20       |
|  |                                                                |
|  o Departed Gibraltar                          Jan 9, 06:00       |
|  |                                                                |
|  . ETA Jebel Ali Port                          Jan 18 (est.)      |
|  |                                                                |
|  . Customs clearance                           Pending            |
|  |                                                                |
|  . Delivery to RAK Port                        Pending            |
|                                                                   |
|  Last updated: Jan 12, 10:45 via Hapag-Lloyd API                  |
+-------------------------------------------------------------------+</div>

    <div class="wireframe-title">6. Cost Breakdown Tab (KEY FEATURE)</div>
    <div class="wireframe">+-------------------------------------------------------------------+
|  [Overview] [Items] [Documents] [Tracking] [Costs] [Activity]     |
+-------------------------------------------------------------------+
|  COST BREAKDOWN                         Allocation: [Bottles v]   |
|                                                                   |
|  Shipment Costs                                                   |
|  +---------------------------------------------------------------+|
|  | Product Cost (ex-cellar)                        $5,760.00     ||
|  | Freight (Bordeaux -> Dubai)                     $2,400.00     ||
|  | Insurance (0.5%)                                  $120.00     ||
|  | Origin handling                                   $150.00     ||
|  | Destination handling                              $200.00     ||
|  | Customs clearance                                 $180.00     ||
|  | Government fees                                   $150.00     ||
|  | Delivery to RAK Port                              $100.00     ||
|  | -----------------------------------------------------------   ||
|  | TOTAL LANDED COST                               $9,060.00     ||
|  | / 480 bottles                                                 ||
|  | = COST PER BOTTLE                                  $18.88     ||
|  +---------------------------------------------------------------+|
|                                                                   |
|  Per-Item Breakdown                                               |
|  +---------------------------------------------------------------+|
|  | Product            |Bottles| Landed |Per Btl|Target|Margin    ||
|  +---------------------------------------------------------------+|
|  | Margaux 2018       |  144  | $2,718 |$18.88 |$35.00| 85%      ||
|  | Latour 2019        |  240  | $4,531 |$18.88 |$28.00| 48%      ||
|  | Dom Perignon 2012  |   96  | $1,811 |$18.88 |$45.00|138%      ||
|  +---------------------------------------------------------------+|
|                                                                   |
|  [Export to Excel]  [Update Costs]                                |
+-------------------------------------------------------------------+</div>

    <div class="wireframe-title">7. Activity Log Tab (Traceability)</div>
    <div class="wireframe">+-------------------------------------------------------------------+
|  [Overview] [Items] [Documents] [Tracking] [Costs] [Activity]     |
+-------------------------------------------------------------------+
|  ACTIVITY LOG                                      [Export Log]   |
|                                                                   |
|  o Status changed to "in_transit"              Jan 6, 09:15       |
|  | By: kevin@craftculture.ae                                      |
|  | From: booked -> in_transit                                     |
|  |                                                                |
|  o Document uploaded: Bill of Lading           Jan 5, 16:30       |
|  | By: partner@bordeaux.fr                                        |
|  | File: BOL-2026-0042.pdf (verified)                             |
|  |                                                                |
|  o Carrier booking confirmed                   Jan 4, 11:20       |
|  | By: kevin@craftculture.ae                                      |
|  | Carrier: Hapag-Lloyd, Ref: HLCU2026001234                      |
|  |                                                                |
|  o Status changed to "booked"                  Jan 4, 11:20       |
|  | By: kevin@craftculture.ae                                      |
|  | From: draft -> booked                                          |
|  |                                                                |
|  o Shipment created                            Jan 3, 14:00       |
|  | By: kevin@craftculture.ae                                      |
|  | Partner: Bordeaux Direct                                       |
|                                                                   |
|  Showing all 12 events                                            |
+-------------------------------------------------------------------+</div>

    <div class="wireframe-title">8. Create Shipment</div>
    <div class="wireframe">+-------------------------------------------------------------------+
|  Create Shipment                                                  |
+-------------------------------------------------------------------+
|                                                                   |
|  Type: ( ) Inbound  ( ) Outbound  ( ) Re-export                   |
|                                                                   |
|  Partner/Client: [Select...]                                      |
|                                                                   |
|  +---------------------+    +---------------------+               |
|  | ORIGIN              | -> | DESTINATION         |               |
|  | Country: [France v] |    | Country: [UAE v]    |               |
|  | City: [Bordeaux   ] |    | City: [Dubai     ]  |               |
|  +---------------------+    +---------------------+               |
|                                                                   |
|  Transport Mode: ( ) Sea (FCL)  ( ) Sea (LCL)  ( ) Air  ( ) Road  |
|                                                                   |
|  Carrier: [Select carrier...]                                     |
|  Booking Ref: [                    ]                              |
|  Container/AWB #: [                ]                              |
|                                                                   |
|  ETD: [Jan 15, 2026]     ETA: [Jan 28, 2026]                      |
|                                                                   |
|  Notes: [                                                       ] |
|                                                                   |
|  [Cancel]                                    [Create Shipment]    |
+-------------------------------------------------------------------+</div>

    <div class="wireframe-title">9. Quote Builder</div>
    <div class="wireframe">+-------------------------------------------------------------------+
|  Create Logistics Quote                           [Save Draft]    |
+-------------------------------------------------------------------+
|  Client: [Select client...]                                       |
|                                                                   |
|  Route & Transport                                                |
|  +--------------------+    +--------------------+                 |
|  | From: Dubai, UAE   | -> | To: Riyadh, KSA    |                 |
|  +--------------------+    +--------------------+                 |
|                                                                   |
|  Mode: [Air v]     Incoterms: [DDP v]                             |
|                                                                   |
|  Cargo                                                            |
|  Cases: [18]   Bottles: [216]   Weight: [270 kg]                  |
|                                                                   |
|  Cost Breakdown                   [Fetch Hillebrand Rate]         |
|  +---------------------------------------------------------------+|
|  | Freight (Air)                                   $1,620.00     ||
|  | Insurance (0.5%)                                  $102.00     ||
|  | Export Handling                                   $150.00     ||
|  | Government Charges                                $250.00     ||
|  | C&C Margin (10%)                                  $212.20     ||
|  | -----------------------------------------------------------   ||
|  | TOTAL (USD)                                     $2,334.20     ||
|  +---------------------------------------------------------------+|
|                                                                   |
|  Valid Until: [Jan 25, 2026]                                      |
|                                                                   |
|  [Cancel]               [Submit for Review]  [Send to Client]     |
+-------------------------------------------------------------------+</div>

    <div class="wireframe-title">10. Partner Portal - My Shipments</div>
    <div class="wireframe">+-------------------------------------------------------------------+
|  MY SHIPMENTS                                                     |
+-------------------------------------------------------------------+
|  +----------+ +----------+ +----------+                           |
|  |     3    | |     1    | |    12    |                           |
|  | In Transit| | At C&C   | | Completed|                           |
|  +----------+ +----------+ +----------+                           |
|                                                                   |
|  Active Shipments                                                 |
|  +---------------------------------------------------------------+|
|  | SHP-2026-0042 | 40 cases | Bordeaux -> Dubai                  ||
|  | ETA: Jan 18   | [Y] In Transit | Docs: 3/5 [!]                ||
|  | [View Details]  [Upload Documents]                            ||
|  +---------------------------------------------------------------+|
|  | SHP-2026-0039 | 20 cases | Burgundy -> Dubai                  ||
|  | Arrived: Jan 10 | [G] At Warehouse | Docs: 5/5 [+]            ||
|  | [View Details]                                                ||
|  +---------------------------------------------------------------+|
|                                                                   |
|  Documents Needed                                                 |
|  [!] SHP-0042: Upload Certificate of Origin                       |
|  [!] SHP-0042: Upload Import Permit                               |
+-------------------------------------------------------------------+</div>

    <div class="wireframe-title">11. Client Portal - Track Shipment</div>
    <div class="wireframe">+-------------------------------------------------------------------+
|  MY SHIPMENTS                                                     |
+-------------------------------------------------------------------+
|  SHP-2026-0041                                 [G] Booked         |
|  Dubai -> Riyadh | Air | 12 cases                                 |
+-------------------------------------------------------------------+
|                                                                   |
|  +---------------------------------------------------------------+|
|  |  ROUTE                                                        ||
|  |  Dubai, UAE  ------------------------>  Riyadh, KSA           ||
|  |  ETD: Jan 14                    ETA: Jan 15                   ||
|  +---------------------------------------------------------------+|
|                                                                   |
|  Timeline                                                         |
|  ---------------------------------------------------------------- |
|  [+] Order confirmed                             Jan 10           |
|  [+] Shipment booked                             Jan 12           |
|  [ ] Dispatched from Dubai                       Jan 14 (est.)    |
|  [ ] Delivered to Riyadh                         Jan 15 (est.)    |
|                                                                   |
|  Documents                                                        |
|  ---------------------------------------------------------------- |
|  [PDF] Commercial Invoice    [Download]                           |
|  [PDF] Packing List          [Download]                           |
|                                                                   |
|  Your Cost: $2,334.20 USD                                         |
+-------------------------------------------------------------------+</div>

    <div class="wireframe-title">12. Landed Cost Report (KEY FEATURE)</div>
    <div class="wireframe">+-------------------------------------------------------------------+
|  LANDED COST ANALYSIS                              [Export CSV]   |
+-------------------------------------------------------------------+
|  Filter: [All Products v] [All Partners v] [2026 v]  [Search]     |
|                                                                   |
|  +---------------------------------------------------------------+|
|  | Product            | Partner    |Landed/Btl|Target|Margin     ||
|  +---------------------------------------------------------------+|
|  | Dom Perignon 2012  | Champagne  |  $18.88  |$45.00| 138%      ||
|  | Margaux 2018       | Bordeaux   |  $18.88  |$35.00|  85%      ||
|  | Opus One 2019      | Napa       |  $22.45  |$55.00| 145%      ||
|  | Latour 2019        | Bordeaux   |  $18.88  |$28.00|  48%      ||
|  | [!] Grange 2017    | Penfolds   |  $35.20  |$32.00|  -9%      ||
|  +---------------------------------------------------------------+|
|                                                                   |
|  [!] 1 product with negative margin                               |
|  [*] 3 products with margin > 100% (arbitrage opportunity)        |
+-------------------------------------------------------------------+</div>

    <div class="wireframe-title">13. Customs Deposits Dashboard (KEY FEATURE)</div>
    <div class="wireframe">+-------------------------------------------------------------------+
|  CUSTOMS DEPOSITS                                 [+ New Deposit] |
+-------------------------------------------------------------------+
|  +--------------+ +--------------+ +--------------+               |
|  |  AED 85,000  | |      4       | |   12 days    |               |
|  | Outstanding  | |   Pending    | |  Avg Reclaim |               |
|  +--------------+ +--------------+ +--------------+               |
|                                                                   |
|  Active Deposits                               [Filter] [Search]  |
|  +---------------------------------------------------------------+|
|  | # | Transfer          | Amount   | Days | Status              ||
|  +---------------------------------------------------------------+|
|  | 1 | RAK -> JAFZA      | AED 25K  |   3  | [Y] Pending         ||
|  | 2 | RAK -> DWC        | AED 18K  |   8  | [B] Transferred     ||
|  | 3 | RAK -> JAFZA      | AED 32K  |  15  | [!] Submitted       ||
|  | 4 | RAK -> KIZAD      | AED 10K  |  22  | [R] Overdue         ||
|  +---------------------------------------------------------------+|
|                                                                   |
|  Alerts                                                           |
|  [!] DEP-004: Overdue - 22 days without reclaim                   |
|  [!] DEP-003: Paperwork submitted 7 days ago, follow up           |
+-------------------------------------------------------------------+</div>

    <!-- INTEGRATIONS -->
    <h2 id="integrations">Integrations</h2>

    <div class="grid-2">
      <div class="card">
        <h4>Hillebrand API (Primary)</h4>
        <p><strong>Purpose:</strong> Get quotes, book shipments, track shipments</p>
        <ul>
          <li>OAuth2 authentication (2hr token refresh)</li>
          <li>GET /api/shipment/get-rates - shipping quotes</li>
          <li>POST /api/shipment/create - book shipment</li>
          <li>GET /api/shipment/{id}/status - tracking</li>
          <li>Webhooks for status updates</li>
        </ul>
        <p><strong>Rate limit:</strong> 100 calls/minute</p>
      </div>

      <div class="card">
        <h4>Hapag-Lloyd API (Secondary)</h4>
        <p><strong>Purpose:</strong> Container tracking for sea freight</p>
        <ul>
          <li>DCSA Track & Trace v2.2 (FREE)</li>
          <li>GET /v2/events?equipmentReference={container}</li>
          <li>Returns tracking events with timestamps</li>
          <li>Synced every 4 hours via Trigger.dev</li>
        </ul>
      </div>

      <div class="card">
        <h4>Zoho Books API</h4>
        <p><strong>Purpose:</strong> Invoice sync and accounting</p>
        <ul>
          <li>POST /api/v3/invoices - create invoice</li>
          <li>POST /api/v3/customerpayments - record payment</li>
          <li>Contact sync</li>
          <li>Bidirectional updates</li>
        </ul>
      </div>

      <div class="card">
        <h4>Internal Services</h4>
        <p><strong>Purpose:</strong> C&C platform integration</p>
        <ul>
          <li>Vercel Blob (document storage)</li>
          <li>Trigger.dev (background jobs, scraping sync)</li>
          <li>OpenAI GPT-4o (document field extraction)</li>
          <li>Existing contacts/CRM database</li>
        </ul>
      </div>
    </div>

    <!-- IMPLEMENTATION PHASES -->
    <h2 id="phases">Implementation Phases</h2>

    <div class="phase">
      <h4>Phase 1: Database & API Foundation</h4>
      <ul>
        <li>Add 15 tables and enums to Drizzle schema</li>
        <li>Run migrations on Neon PostgreSQL</li>
        <li>Create tRPC router at _logistics/router.ts</li>
        <li>Implement admin CRUD for shipments</li>
        <li>Implement admin CRUD for quotes</li>
        <li>Basic validation with Zod schemas</li>
      </ul>
    </div>

    <div class="phase">
      <h4>Phase 2: Document Management</h4>
      <ul>
        <li>Document upload to Vercel Blob</li>
        <li>Document type classification</li>
        <li>Expiry date tracking</li>
        <li>Version history (re-upload keeps old)</li>
        <li>AI field extraction (Trigger.dev job)</li>
        <li>Required document checklists per shipment type</li>
      </ul>
    </div>

    <div class="phase">
      <h4>Phase 3: Admin UI</h4>
      <ul>
        <li>Dashboard page with stats and alerts</li>
        <li>Shipment list page with filters</li>
        <li>Shipment detail page (all 6 tabs)</li>
        <li>Create/edit shipment forms</li>
        <li>Quote builder with approval workflow</li>
        <li>Activity log components</li>
      </ul>
    </div>

    <div class="phase">
      <h4>Phase 4: Cost Analysis & Deposits</h4>
      <ul>
        <li>Cost breakdown per shipment</li>
        <li>Landed cost per bottle calculation</li>
        <li>Allocation methods (bottles/weight/value)</li>
        <li>Margin tracking and alerts</li>
        <li>Landed cost report page</li>
        <li>Customs deposits tracking</li>
        <li>Deposit reclaim workflow</li>
      </ul>
    </div>

    <div class="phase">
      <h4>Phase 5: Carrier Integration</h4>
      <ul>
        <li>Hillebrand OAuth2 client</li>
        <li>Hillebrand get-rates endpoint</li>
        <li>Hillebrand track-shipment endpoint</li>
        <li>Hillebrand webhook receiver</li>
        <li>Hapag-Lloyd tracking sync (Trigger.dev cron)</li>
        <li>Tracking timeline component</li>
      </ul>
    </div>

    <div class="phase">
      <h4>Phase 6: Partner & Client Portal</h4>
      <ul>
        <li>Partner shipment list (filtered)</li>
        <li>Partner shipment detail (limited tabs)</li>
        <li>Partner document upload</li>
        <li>Client shipment tracking</li>
        <li>Client document download</li>
        <li>Client cost visibility</li>
      </ul>
    </div>

    <div class="phase">
      <h4>Phase 7: Invoicing & Reporting</h4>
      <ul>
        <li>Payment tracking (inbound/outbound)</li>
        <li>Invoice generation</li>
        <li>Invoice PDF generation</li>
        <li>Zoho Books sync</li>
        <li>Export reports (Excel/CSV)</li>
        <li>Compliance dashboard</li>
      </ul>
    </div>

    <div class="footer">
      <p>C&C Logistics Module - Complete Implementation Plan | January 2026</p>
      <p>Craft & Culture | RAK Port, UAE</p>
    </div>
  </div>
</body>
</html>
